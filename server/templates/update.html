<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Edit Stat</title>
    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1 class="mb-4">Edit Stat</h1>
        <form id="editStatForm">
            <!-- Title -->
            <div class="form-group">
                <label for="title">Title:</label>
                <input type="text" id="title" name="title" class="form-control" value="{{ stat.title }}" required>
            </div>

<!-- Round 1 -->
<!-- make boxusing bootstrap  -->
<h4>Quarterfinals</h4>

<div class="form-group">
    <label for="round1_home1">Home 1:</label>
    <input type="text" id="round1_home1" name="round1_home1" class="form-control" value="{{ stat.round1['home1'] }}">
</div>
<div class="form-group">
    <label for="round1_visitor1">Visitor 1:</label>
    <input type="text" id="round1_visitor1" name="round1_visitor1" class="form-control" value="{{ stat.round1['visitor1'] }}">
</div>
<div class="form-group">
    <label for="round1_home2">Home 2:</label>
    <input type="text" id="round1_home2" name="round1_home2" class="form-control" value="{{ stat.round1['home2'] }}">
</div>
<div class="form-group">
    <label for="round1_visitor2">Visitor 2:</label>
    <input type="text" id="round1_visitor2" name="round1_visitor2" class="form-control" value="{{ stat.round1['visitor2'] }}">
</div>
<div class="form-group">
    <label for="round1_home3">Home 3:</label>
    <input type="text" id="round1_home3" name="round1_home3" class="form-control" value="{{ stat.round1['home3'] }}">
</div>
<div class="form-group">
    <label for="round1_visitor3">Visitor 3:</label>
    <input type="text" id="round1_visitor3" name="round1_visitor3" class="form-control" value="{{ stat.round1['visitor3'] }}">
</div>
<div class="form-group">
    <label for="round1_home4">Home 4:</label>
    <input type="text" id="round1_home4" name="round1_home4" class="form-control" value="{{ stat.round1['home4'] }}">
</div>
<div class="form-group">
    <label for="round1_visitor4">Visitor 4:</label>
    <input type="text" id="round1_visitor4" name="round1_visitor4" class="form-control" value="{{ stat.round1['visitor4'] }}">
</div>

<!-- Round 2 -->
<h4>Semifinals</h4>
<div class="form-group">
    <label for="round2_home1">Home 1:</label>
    <input type="text" id="round2_home1" name="round2_home1" class="form-control" value="{{ stat.round2['home1'] }}">
</div>
<div class="form-group">
    <label for="round2_visitor1">Visitor 1:</label>
    <input type="text" id="round2_visitor1" name="round2_visitor1" class="form-control" value="{{ stat.round2['visitor1'] }}">
</div>
<div class="form-group">
    <label for="round2_home2">Home 2:</label>
    <input type="text" id="round2_home2" name="round2_home2" class="form-control" value="{{ stat.round2['home2'] }}">
</div>
<div class="form-group">
    <label for="round2_visitor2">Visitor 2:</label>
    <input type="text" id="round2_visitor2" name="round2_visitor2" class="form-control" value="{{ stat.round2['visitor2'] }}">
</div>

<!-- Round 3 -->
<h4>Final</h4>
<div class="form-group">
    <label for="round3_home1">Home 1:</label>
    <input type="text" id="round3_home1" name="round3_home1" class="form-control" value="{{ stat.round3['home1'] }}">
</div>
<div class="form-group">
    <label for="round3_visitor1">Visitor 1:</label>
    <input type="text" id="round3_visitor1" name="round3_visitor1" class="form-control" value="{{ stat.round3['visitor1'] }}">
</div>

<!-- Round 4 -->
<h4>Winner</h4>
<div class="form-group">
    <label for="round4_winner">Winner:</label>
    <input type="text" id="round4_winner" name="round4_winner" class="form-control" value="{{ stat.round4.winner }}">
</div>

<!-- Scores -->
<h3>Scores</h3>
<h4>Quarterfinals</h4>
<div class="form-group">
    <label for="scores_hs1_1">HS1 1:</label>
    <input type="text" id="scores_hs1_1" name="scores_hs1_1" class="form-control" value="{{ stat.scores['hs1_1'] }}">
</div>
<div class="form-group">
    <label for="scores_vs1_1">VS1 1:</label>
    <input type="text" id="scores_vs1_1" name="scores_vs1_1" class="form-control" value="{{ stat.scores['vs1_1'] }}">
</div>
<div class="form-group">
    <label for="scores_hs1_2">HS1 2:</label>
    <input type="text" id="scores_hs1_2" name="scores_hs1_2" class="form-control" value="{{ stat.scores['hs1_2'] }}">
</div>
<div class="form-group">
    <label for="scores_vs1_2">VS1 2:</label>
    <input type="text" id="scores_vs1_2" name="scores_vs1_2" class="form-control" value="{{ stat.scores['vs1_2'] }}">
</div>
<div class="form-group">
    <label for="scores_hs1_3">HS1 3:</label>
    <input type="text" id="scores_hs1_3" name="scores_hs1_3" class="form-control" value="{{ stat.scores['hs1_3'] }}">
</div>
<div class="form-group">
    <label for="scores_vs1_3">VS1 3:</label>
    <input type="text" id="scores_vs1_3" name="scores_vs1_3" class="form-control" value="{{ stat.scores['vs1_3'] }}">
</div>
<div class="form-group">
    <label for="scores_hs1_4">HS1 4:</label>
    <input type="text" id="scores_hs1_4" name="scores_hs1_4" class="form-control" value="{{ stat.scores['hs1_4'] }}">
</div>
<div class="form-group">
    <label for="scores_vs1_4">VS1 4:</label>
    <input type="text" id="scores_vs1_4" name="scores_vs1_4" class="form-control" value="{{ stat.scores['vs1_4'] }}">
</div>
<h4>Semifinals</h4>
<div class="form-group">
    <label for="scores_hs2_1">HS2 1:</label>
    <input type="text" id="scores_hs2_1" name="scores_hs2_1" class="form-control" value="{{ stat.scores['hs2_1'] }}">
</div>
<div class="form-group">
    <label for="scores_vs2_1">VS2 1:</label>
    <input type="text" id="scores_vs2_1" name="scores_vs2_1" class="form-control" value="{{ stat.scores['vs2_1'] }}">
</div>
<div class="form-group">
    <label for="scores_hs2_2">HS2 2:</label>
    <input type="text" id="scores_hs2_2" name="scores_hs2_2" class="form-control" value="{{ stat.scores['hs2_2'] }}">
</div>
<div class="form-group">
    <label for="scores_vs2_2">VS2 2:</label>
    <input type="text" id="scores_vs2_2" name="scores_vs2_2" class="form-control" value="{{ stat.scores['vs2_2'] }}">
</div>
<h4>Finals</h4>
<div class="form-group">
    <label for="scores_hs3_1">HS3 1:</label>
    <input type="text" id="scores_hs3_1" name="scores_hs3_1" class="form-control" value="{{ stat.scores['hs3_1'] }}">
</div>

<div class="form-group">
    <label for="scores_vs3_1">VS3 1:</label>
    <input type="text" id="scores_vs3_1" name="scores_vs3_1" class="form-control" value="{{ stat.scores.vs3_1 }}">
</div>

            <button type="submit" class="btn btn-primary">Update</button>
        </form>
        <p class="mt-3"><a href="{{ url_for('list_stats') }}" class="btn btn-secondary">Back to Stats List</a></p>
    </div>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    
    <!-- Fetch API script -->
    <script>
        document.getElementById('editStatForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent the default form submission

            // Collect form data into a JSON object
            const formData = {
                id: {{ stat.id }},
                title: document.getElementById('title').value,
                round1: {
                    home1: document.getElementById('round1_home1').value,
                    home2: document.getElementById('round1_home2').value,
                    home3: document.getElementById('round1_home3').value,
                    home4: document.getElementById('round1_home4').value,
                    visitor1: document.getElementById('round1_visitor1').value,
                    visitor2: document.getElementById('round1_visitor2').value,
                    visitor3: document.getElementById('round1_visitor3').value,
                    visitor4: document.getElementById('round1_visitor4').value
                },
                round2: {
                    home1: document.getElementById('round2_home1').value,
                    home2: document.getElementById('round2_home2').value,
                    visitor1: document.getElementById('round2_visitor1').value,
                    visitor2: document.getElementById('round2_visitor2').value
                },
                round3: {
                    home1: document.getElementById('round3_home1').value,
                    visitor1: document.getElementById('round3_visitor1').value
                },
                round4: {
                    winner: document.getElementById('round4_winner').value
                },
                scores: {
                    hs1_1: document.getElementById('scores_hs1_1').value,
                    hs1_2: document.getElementById('scores_hs1_2').value,
                    hs1_3: document.getElementById('scores_hs1_3').value,
                    hs1_4: document.getElementById('scores_hs1_4').value,
                    hs2_1: document.getElementById('scores_hs2_1').value,
                    hs2_2: document.getElementById('scores_hs2_2').value,
                    hs3_1: document.getElementById('scores_hs3_1').value,
                    vs1_1: document.getElementById('scores_vs1_1').value,
                    vs1_2: document.getElementById('scores_vs1_2').value,
                    vs1_3: document.getElementById('scores_vs1_3').value,
                    vs1_4: document.getElementById('scores_vs1_4').value,
                    vs2_1: document.getElementById('scores_vs2_1').value,
                    vs2_2: document.getElementById('scores_vs2_2').value,
                    vs3_1: document.getElementById('scores_vs3_1').value
                }
            };

            // Send the data via a PUT request
            fetch('/stats/1', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
                if (data != null) {
                    alert('Stat updated successfully!');
                    // Optionally redirect or update the page as needed
                } else {
                    alert('Failed to update stat. Please try again.');
                }
            })
            .catch(error => console.error('Error:', error));
        });
    </script>
</body>
</html>
